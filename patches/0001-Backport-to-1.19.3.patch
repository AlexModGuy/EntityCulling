From b8a1cddd33bc76fb2fbb653f4d82069cc13b18c4 Mon Sep 17 00:00:00 2001
From: tr7zw <tr7zw@live.de>
Date: Sun, 19 Mar 2023 03:09:50 +0100
Subject: [PATCH] Backport to 1.19.3

---
 .../src/main/resources/fabric.mod.json            |  2 +-
 .../src/main/resources/META-INF/mods.toml         |  2 +-
 .../tr7zw/entityculling/EntityCullingModBase.java | 15 ++++++---------
 gradle-compose.yml                                |  2 +-
 4 files changed, 9 insertions(+), 12 deletions(-)

diff --git a/EntityCulling-Fabric/src/main/resources/fabric.mod.json b/EntityCulling-Fabric/src/main/resources/fabric.mod.json
index 6925193..8b9f346 100644
--- a/EntityCulling-Fabric/src/main/resources/fabric.mod.json
+++ b/EntityCulling-Fabric/src/main/resources/fabric.mod.json
@@ -29,6 +29,6 @@
 
   "depends": {
     "fabric-api": "*",
-    "minecraft": ">=1.19.4"
+    "minecraft": ">=1.19.3"
   }
 }
diff --git a/EntityCulling-Forge/src/main/resources/META-INF/mods.toml b/EntityCulling-Forge/src/main/resources/META-INF/mods.toml
index 7423916..a2b649b 100644
--- a/EntityCulling-Forge/src/main/resources/META-INF/mods.toml
+++ b/EntityCulling-Forge/src/main/resources/META-INF/mods.toml
@@ -19,6 +19,6 @@ Using async raytracing to hide Tile-/Entities that are hidden behind solid block
 [[dependencies.entityculling]]
     modId="minecraft"
     mandatory=true
-    versionRange="[1.19.4,)"
+    versionRange="[1.19.3,)"
     ordering="NONE"
     side="CLIENT"
diff --git a/Shared/src/main/java/dev/tr7zw/entityculling/EntityCullingModBase.java b/Shared/src/main/java/dev/tr7zw/entityculling/EntityCullingModBase.java
index 739979d..f9bafdd 100644
--- a/Shared/src/main/java/dev/tr7zw/entityculling/EntityCullingModBase.java
+++ b/Shared/src/main/java/dev/tr7zw/entityculling/EntityCullingModBase.java
@@ -106,23 +106,20 @@ public abstract class EntityCullingModBase {
         if (!lateInit) {
             lateInit = true;
             cullThread.start();
-            for (String blockId : config.blockEntityWhitelist) {
-                Optional<BlockEntityType<?>> block = BuiltInRegistries.BLOCK_ENTITY_TYPE
-                        .getOptional(new ResourceLocation(blockId));
+            for(String blockId : config.blockEntityWhitelist) {
+                Optional<BlockEntityType<?>> block = BuiltInRegistries.BLOCK_ENTITY_TYPE.getOptional(new ResourceLocation(blockId));
                 block.ifPresent(b -> {
                     blockEntityWhitelist.add(b);
                 });
             }
-            for (String entityType : config.tickCullingWhitelist) {
-                Optional<EntityType<?>> entity = BuiltInRegistries.ENTITY_TYPE
-                        .getOptional(new ResourceLocation(entityType));
+            for(String entityType : config.tickCullingWhitelist) {
+                Optional<EntityType<?>> entity = BuiltInRegistries.ENTITY_TYPE.getOptional(new ResourceLocation(entityType));
                 entity.ifPresent(e -> {
                     entityWhistelist.add(e);
                 });
             }
-            for (String entityType : config.entityWhitelist) {
-                Optional<EntityType<?>> entity = BuiltInRegistries.ENTITY_TYPE
-                        .getOptional(new ResourceLocation(entityType));
+            for(String entityType : config.entityWhitelist) {
+                Optional<EntityType<?>> entity = BuiltInRegistries.ENTITY_TYPE.getOptional(new ResourceLocation(entityType));
                 entity.ifPresent(e -> {
                     entityWhistelist.add(e);
                 });
diff --git a/gradle-compose.yml b/gradle-compose.yml
index 514077e..39182c1 100644
--- a/gradle-compose.yml
+++ b/gradle-compose.yml
@@ -1,5 +1,5 @@
 version: '0.0.2'
-source: "https://github.com/tr7zw/ModComposeTemplate/tree/1.19.4"
+source: "https://github.com/tr7zw/ModComposeTemplate/tree/1.19.3"
 replacements:
   group: "dev.tr7zw"
   name: "EntityCulling"
-- 
2.32.0.windows.2

